<!-- NOTE: I used a bootstrap library to make the looks and features of the webpage better -->
<!-- NOTE: I also referenced w3schools and combined bootstrap into it  -->

<html>

<head>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="script.js"></script>
  <link href="style.css" rel="stylesheet">
  <title>Nutrition Wizard</title>

</head>

<body>
  <div class="container fullDiv">
    <p class="heading1">ÔºäÀö*‚Ä¢Ã©Ã©Õô‚ú©‚Ä¢Ã©Ã©Õô*ÀöNutrition WizardÀö*‚Ä¢Ã©Ã©Õô‚ú©‚Ä¢Ã©Ã©Õô*ÀöÔºä</p>
    <h5>‚ÄúOne cannot think well, love well, sleep well if one has not dined well.‚Äù</h5>
    <h5>LEARN. CALULCATE. SAVE. </h5>

<!-- NOTE: NOT MY IMAGE, I GOT THIS FROM THE SITE: RTI.ORG, SOURCE PROVIDED BELOW 
    source: Studying Ingredients for New Food Product Development. (2022, July 12). RTI. https://www.rti.org/impact/assessing-health-quality-in-food-product-development-->

<img class="img-fluid" src="https://www.rti.org/sites/default/files/impact-hero-images/ia_food_hero.jpg"
      alt="Studying Ingredients for New Food Product Development">
    <div class="container">
      <br>
      <div class="" style="width:100%;">
        <div class="bg-danger" style="width:100%;">
          <h1>ü•óAbout the Nutrition Wizardü•ó</h1>
        </div>

<div class="">
<p>Welcome to the magical world of Nutrition Wizard, where all your nutrition-related dreams come true! Need
            to know how many calories or the amount of fat your ingredient contains? Well, fear not because with the
            super-fast nutrition calculator, you are just a few clicks and seconds away from finding the nutrition facts
            of your ingredients. Whether you're health-conscious, a fitness enthusiast, or just someone who wants to
            monitor their daily consumption, Nutrition Wizard is here to save the day and at your service!¬†You'll also
            be on your way to a healthy lifestyle by¬†knowing how many calories you need to eat! Enjoy the many features
            Nutrition Wizard has to offer and don't forget to LEARN. SAVE. AND CALCULATE! ENJOY!


</p>
  </div>

  <footer class="bg-warning">
          <h5>.</h5>
        </footer>
      </div>
    </div>



<br />
    <br />

<div class="position-relative">
      <form id="nutritionform">
        <h4>Please enter the amount and ingredients (make sure to separate each ingredient with "and"):</h4>
        <div class="form-floating">
          <textarea class="form-control" placeholder="Add ingredients here like '1 apple and 1 orange'" id="input"
            style="height: 100px"></textarea><label for="input">Add Your ingredients here</label>
        </div>
      </form>

<button class="btn btn-success position-absolute top-160 start-50 translate-middle"
        onclick="getInputForAnalyse()">‚≠í‚ùÉAnalyze‚ùÉ‚≠í</button>
    </div>

<div id="result">
    </div>


<br />
    <!-- Add a new table element to hold the ingredients -->
    <table id="ingredients-table">
      <tr>
        <th>Ingredients</th>
      </tr>
    </table>


<!-- Add a div to hold the result of the analysis -->
<div id="result"></div>

<head>
      <title>Save Your Ingredients</title>
      <style>

  </style>
    </head>
    <h1>Save Your Ingredients</h1>
    <p>Save the ingredients here so you can always go back to its nutrition facts </p>

  <div class="input-group mb-3">
      <span class="input-group-text">Food Name:</span>
      <input type="text" class="form-control" id="Ingredient" placeholder="food name" aria-label="Username"
        aria-describedby="basic-addon1">
    </div>
    <div class="input-group mb-3">
      <span class="input-group-text">Calories:</span>
      <input type="text" class="form-control" id="calories" placeholder="calories" aria-label="Username"
        aria-describedby="basic-addon1">
    </div>
    <div class="input-group mb-3">
      <span class="input-group-text">Fats:</span>
      <input type="text" class="form-control" id="fats" placeholder="fats" aria-label="Username"
        aria-describedby="basic-addon1">
    </div>
    <div class="input-group mb-3">
      <span class="input-group-text">Proteins:</span>
      <input type="text" class="form-control" id="proteins" placeholder="proteins" aria-label="Username"
        aria-describedby="basic-addon1">
    </div>
    <div class="input-group mb-3">
      <span class="input-group-text">Carbs:</span>
      <input type="text" class="form-control" id="carbs" placeholder="carbs" aria-label="Username"
        aria-describedby="basic-addon1">

  </div>

  <button class="btn btn-primary mb-3 position-absolute top-160 start-50 translate-middle" onclick="addFood()">Add
      Food</button>


  <br>
    <p class="h2">Saved Nutrition Facts:</p>
    <table id="foodTable" class="table table-striped">
      <thead>
        <tr>
          <th>Food Name</th>
          <th>Calories</th>
          <th>Fats</th>
          <th>Proteins</th>
          <th>Carbs</th>
        </tr>
      </thead>
      <tbody id="foodTable"></tbody>
    </table>


  <head>
      <title></title>

  </head>

  <h1>Recommended Calories According to Age!</h1>
    <div class="input-group mb-3">
      <span class="input-group-text">Age:</span>
      <input type="text" class="form-control" id="age" placeholder="age" aria-label="age"
        aria-describedby="basic-addon1">
    </div>
    <div class="input-group mb-3">
      <span class="input-group-text">Calories consumed:</span>
      <input type="text" class="form-control" id="calCon" placeholder="calCon" aria-label="calCon"
        aria-describedby="basic-addon1">
    </div>
    <button class="btn btn-primary mb-3 position-absolute top-160 start-50 translate-middle"
      onclick="calcCal()">Calculate</button>
    <br>
    <div class="card">
      <div id="output" class="card-body">
        Recommended Calories.
      </div>
    </div>
    <br>
  </div>
</body>

</html>

<scirpt>
// NOTE: I used w3schools as a reference for some parts of the code, but I changed it accordingly to my requirements.
// I also refernced developer.mozilla.org for the table formating and javascript code

// This function gets the user input from the input field on the HTML page 
function getInputForAnalyse() { 
  const input = document.getElementById("input").value;
    // this code passes the user input into the analyze function for further processing


analyze(input);
}
// This function sends the user input to an external API to retrieve nutritional information and displays it in a table
function analyze(input) {
  if (input == "") {
// If the user input is empty, it sends an alert message and asks the user to enter an ingredient
    alert("Please enter an ingredient!");
  }
  else {
  // If the user input is not empty, it builds the API endpoint URL with the user input as the ingredient to analyze
    const url = `https://edamam-edamam-nutrition-analysis.p.rapidapi.com/api/nutrition-data?ingr=${input}`;
    const headers = { 
      // use of api to get the nutrition facts, api from rapidapi
      "X-RapidAPI-Host": "edamam-edamam-nutrition-analysis.p.rapidapi.com",
      "X-RapidAPI-Key": "afae82f074msh729fe72b128081fp1f40f4jsn36bd559b1ce4"
    };

    // Save the ingredients in a table
  // creates a table to display the ingredients and add the user input as a new row in the table
    const ingredientsTable = document.getElementById("ingredients-table");
    const row = ingredientsTable.insertRow();
    const cell = row.insertCell();
    cell.innerHTML = input;
// fetch the nutritional information from the external API and display the results in a new table

    fetch(url, {
      method: "GET",
      headers: headers
    })
      .then(response => response.json())
      .then(data => {
        const nutrients = data.totalNutrients; // LIST CREATION USING THE DATA FROM THE API
        ingredientsTableC(nutrients); // PROCEDURAL CALL WITH PROPER ARGUMENT
      });
  }
}
// This function takes the nutritional information retrieved from the API and displays it in a table

function ingredientsTableC(nutrients) {  //  PARAMETER
  if(nutrients == ""){ //SELECTION STATEMENT
  
    alert("Please check the name of ingredient. No information from server.");
  }
  else{ //SELECTION STATEMENT
    const table = document.createElement("table");
        table.innerHTML = `
          <tr>
            <th>Nutrient</th>
            <th>Quantity</th>
            <th>Unit</th>
          </tr>
        `;
    // Iterate over each nutrient in the nutrients list and create a new row for each nutrient in the table
    for (let nutrient in nutrients) { // ITERATION STATEMENT
      var n = nutrients[nutrient];
      const row = document.createElement("tr"); // EXTRACTING EACH ELEMENT OF THE LIST AND USING IT 
      row.innerHTML = `
              <td>${n.label}</td>
              <td>${n.quantity.toFixed(2)}</td>
              <td>${n.unit}</td>
            `;
      table.appendChild(row);
    }
    // Display the nutritional information table in the HTML page

    const result = document.getElementById("result"); //SEQUENCING STATEMENTS 72-74
    result.innerHTML = "";
    result.appendChild(table);
  }
  
}

let savednutritionfacts = []; //use of list, empty list, info stored in here than later showed in table
// This function adds a new food item to the list of saved nutrition facts

function addFood() {
  let Ingredient = document.getElementById("Ingredient").value;
  let calories = parseInt(document.getElementById("calories").value);
  let fats = parseInt(document.getElementById("fats").value);
  let proteins = parseInt(document.getElementById("proteins").value);
  let carbs = parseInt(document.getElementById("carbs").value);
  if(Ingredient ==""){
    alert("Food name should be given.");
  }
  else{
    let food = {
      name: Ingredient,
      calories: calories,
      fats: fats,
      proteins: proteins,
      carbs: carbs
    };
   // Here I am adding the food object to the savednutritionfacts array
    savednutritionfacts.push(food);
  
    let foodTable = document.getElementById("foodTable");
    let row = foodTable.insertRow();
    let nameCell = row.insertCell();
    let caloriesCell = row.insertCell();
    let fatsCell = row.insertCell();
    let proteinsCell = row.insertCell();
    let carbsCell = row.insertCell();
    nameCell.innerHTML = food.name;
    caloriesCell.innerHTML = food.calories;
    fatsCell.innerHTML = food.fats;
    proteinsCell.innerHTML = food.proteins;
    carbsCell.innerHTML = food.carbs;
  
    document.getElementById("Ingredient").value = "";
    document.getElementById("calories").value = "";
    document.getElementById("fats").value = "";
    document.getElementById("proteins").value = "";
    document.getElementById("carbs").value = "";
  }
  
}

function calcCal() {
  // get user input
  // NOTE: recommended calories according to age info taken from a table provided by FDA
  var age = parseInt(document.getElementById("age").value);
  if(isNaN(age)|| age < 0 || age > 110 ) {
    alert("Please input a valid age.");
  }
  else{
    var calCon = document.getElementById("calCon").value;
  // calculating recommended calories according to the age
  var recCal = 0;
  if (age <= 3) {
  recCal = 1000;
} else if (age == 4 || age <= 5) {
  recCal = 1200;
} else if (age == 6 || age <= 8) {
  recCal = 1400;
} else if (age == 9 || age <= 10) {
  recCal = 1600;
} else if (age == 11 || age <= 12) {
  recCal = 1800;
} else if (age == 13 || age <= 14) {
  recCal = 2000;
} else if (age == 15) {
  recCal = 2200;
} else if (age == 16 || age <= 18) {
  recCal = 2400;
} else if (age == 19 || age <= 20) {
  recCal = 2600;
} else if (age == 21 || age <= 40) {
  recCal = 2400;
} else if (age == 41 || age <= 60) {
  recCal = 2200;
} else {
  recCal = 2000;
}

// very important because this part calculates the remaining calories needed to meet the recommended daily intake
  var remainCal = parseInt(recCal) - calCon;

  // output result
  var output = document.getElementById("output");
  output.innerHTML = "Hi! Based on your age, you should consume " + recCal + " calories per day. You have consumed " + calCon + " calories today. You still need to consume " + remainCal + " calories to meet your daily requirement. STAY FIT AND STAY HEALTHY";
  }
  
}

<scirpt/>

